(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=require("koa");var n=e.n(t);const a=require("@koa/router");var l=e.n(a);const r=require("koa-static");var o=e.n(r);const c=require("react");var u=e.n(c);const i=require("react-dom/server"),s=require("react-router-dom/server"),m=require("react-router-dom"),d=function(){return u().createElement(u().Fragment,null,u().createElement("main",null,u().createElement("h2",null,"Welcome to the homepage!"),u().createElement("p",null,"You can do this, I believe in you.")),u().createElement("nav",null,"Home"))},h=require("axios");var p=e.n(h);function E(){const[e,t]=(0,c.useState)("");return u().createElement(u().Fragment,null,u().createElement("main",null,u().createElement("h2",null,"Who are we?"),u().createElement("p",null,"That feels like an existential question, don't you think?")),u().createElement("nav",null,"About"),u().createElement("div",null,e))}E.loadData=()=>new Promise((e=>{p().get("http://localhost:3000/getData").then((t=>{e(t.data.data)}))}));const v=E,b=[{path:"/",index:!0,element:u().createElement(d,null)},{path:"/about",element:u().createElement(v,null)}],g=()=>(0,m.useRoutes)(b),q=()=>u().createElement("div",null,u().createElement("p",null,u().createElement(m.Link,{to:"/"},"Home")),u().createElement("p",null,u().createElement(m.Link,{to:"/about"},"About")),u().createElement("hr",null),u().createElement(g,null)),y=new(n()),w=new(l());w.get(["/","/about"],(async e=>{const t=b.map((t=>{if(t.path===e.req.url&&t.element.type.loadData)return t.element.type.loadData()})).filter(Boolean);await Promise.all(t).then((e=>{console.log(e,"data")}));const n=(0,i.renderToString)(u().createElement(s.StaticRouter,{location:e.req.url},u().createElement(q,null)));e.body=`\n    <!DOCTYPE html>\n    <html lang="en">\n    <head>\n      <meta charset="UTF-8">\n      <meta http-equiv="X-UA-Compatible" content="IE=edge">\n      <meta name="viewport" content="width=device-width, initial-scale=1.0">\n      <title>React-ssr</title>\n    </head>\n    <body>\n      <div id="app">${n}</div>\n      <script src="bundle.js"><\/script>\n    </body>\n    </html>\n  `})),w.get("/getData",(e=>{e.body={code:0,data:"后端返回数据"}})),y.use(o()("assets")),y.use(w.routes()).use(w.allowedMethods()),y.listen(3e3,(()=>{console.log("listening server http://localhost:3000")}))})();